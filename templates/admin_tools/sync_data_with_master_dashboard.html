{# templates/admin_tools/statistics_summary.html #}
{% extends "template_base.html" %}

{% block title %}Sync Data With Master We Vote Servers{% endblock %}

{%  block content %}
{% load template_filters %}
<a href="{% url 'admin_tools:admin_home' %}">< Back to Admin Home</a>

<h1>Sync Data With Master We Vote Servers</h1>

<p>These imports are best run in order from top-to-bottom.</p>


{# ################################### #}
<h4>Elections</h4>

<p><a href="{% url 'election:elections_import_from_master_server' %}">Retrieve Elections</a></p>
<br />

{% if election_list %}
    <form name="candidate_choose_election" method="get" action="{% url 'admin_tools:sync_dashboard' %}">
        {% csrf_token %}

    <select id="google_civic_election_id" name="google_civic_election_id">
        <option value="0" {% if 0 == google_civic_election_id|convert_to_int %} selected="selected"{% endif %}>
            -- Filter by Election --</option>
    {% for election in election_list %}
        <option value="{{ election.google_civic_election_id }}"
                {% if election.google_civic_election_id|slugify == google_civic_election_id|slugify %} selected="selected"{% endif %}>
            {{ election.election_name }} - {{ election.google_civic_election_id }} - {{ election.election_day_text }}</option>
    {% endfor %}
    </select>
    </form>
{% endif %}{# End of if election_list #}


{# ################################### #}
<h4>Offices</h4>

<p><a href="{% url 'office:offices_import_from_master_server' %}?google_civic_election_id={{ google_civic_election_id }}">
    Retrieve Offices</a></p>
<br />


{# ################################### #}
<h4>Candidates</h4>

<p><a href="{% url 'candidate:candidates_import_from_master_server' %}?google_civic_election_id={{ google_civic_election_id }}">
    Retrieve Candidates</a></p>
<br />


{# ################################### #}
<h4>Measures</h4>

<p><a href="{% url 'measure:measures_import_from_master_server' %}?google_civic_election_id={{ google_civic_election_id }}">
    Retrieve Measures</a></p>
<br />


{# ################################### #}
<h4>Organizations</h4>

<p><a href="{% url 'organization:organizations_import_from_master_server' %}?google_civic_election_id={{ google_civic_election_id }}">
    Retrieve Organizations</a></p>
<br />


{# ################################### #}
<h4>Positions</h4>

<p><a href="{% url 'position:positions_import_from_master_server' %}?google_civic_election_id={{ google_civic_election_id }}">
    Retrieve Positions</a></p>
<br />


{# ################################### #}
    <br />
    <br />
    <br />
<h4>Settings</h4>
<p>ELECTIONS_SYNC_URL: {{ elections_sync_url }}</p>
<p>OFFICES_SYNC_URL: {{ offices_sync_url }}</p>
<p>CANDIDATES_SYNC_URL: {{ candidates_sync_url }}</p>
<p>MEASURES_SYNC_URL: {{ measures_sync_url }}</p>
<p>ORGANIZATIONS_SYNC_URL: {{ organizations_sync_url }}</p>
<p>POSITIONS_SYNC_URL: {{ positions_sync_url }}</p>


<script>
    $(function() {
        $('#google_civic_election_id').change(function() {
            this.form.submit();
        });
    });
</script>

{%  endblock %}
